<html>
    <head>
        <title>Mensagens Secretas</title>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <link rel="stylesheet" href="desafio.css">
    </head>

    <body>
        <img  src ="img/vector.png" alt =" Logo da alura " >
        <script src="https://s.codigofonte.com.br/wp-content/js/codigofonte-bar.js"></script>
        <script language="javascript">
            function Encripta(dados){
                var mensx="";
                var l;
                var i;
                var j=0;
                var ch;
                ch = "assbdFbdpdPdpfPdAAdpeoseslsQQEcDDldiVVkadiedkdkLLnm";

                for (i=0;i<dados.length; i++){
                    j++;
                    l=(Asc(dados.substr(i,1))+(Asc(ch.substr(j,1))));
                    if (j==50){
                        j=1;
                    }
                    if (l>255){
                        l-=256;
                    }
                    mensx+=(Chr(l));
                }
                document.getElementById("1").value=mensx;
            }

            function Descripta(dados){
                var mensx="";
                var l;
                var i;
                var j=0;
                var ch;
                ch = "assbdFbdpdPdpfPdAAdpeoseslsQQEcDDldiVVkadiedkdkLLnm";
                
                for (i=0; i<dados.length;i++){
                    j++;
                    l=(Asc(dados.substr(i,1))-(Asc(ch.substr(j,1))))

                    if (j==50){
                        j=1;
                    }
                    if (l<0){
                        l+=256;
                    }
                     mensx+=(Chr(l));
	            }
	            document.getElementById("2").value=mensx;
            }

            function Asc(String){
                return String.charCodeAt(0);
            }

            function Chr(AsciiNum){
	            return String.fromCharCode(AsciiNum)
             }
        </script>

        <table>
            <tr >
                <td align="center"> Mensagem </td>
                <td align="center"> Criptografia </td>
                <td align="center"> Descriptografia </td>
            </tr>
                <tr class="caixa">
                <td align="center"><textarea name="1" id="0" cols="40"  rows="10" onKeyPress="return enter(event, this);" required placeholder="  Digite a mensagem e click 'Enter'"></textarea></td>
                <td align="center"><textarea name="2" id="1"  cols="40" rows="10" onKeyPress="return enter(event, this);" required placeholder=" ... click 'Enter'" ></textarea></td>
                <td align="center"><textarea name="3" id="2" cols="40" rows="10" onKeyPress="return enter(event, this);" required placeholder="  ... click botÃ£o 'Limpar Campos'" ></textarea></td>
            </tr>
        </table>
            <input type="submit" value="Limpar Campos" onClick="limpar();" class="botao">

        <script language="javascript">
            document.getElementById("0").focus();

            function enter(event, envia){
                var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;

                    if (keyCode == 13){
                        var dados=document.getElementById(envia.id);
                        var next=(parseInt(envia.id)+1);

                    if(dados.value.lenght<=0){
                        return false;
                    }else{

                    if (envia.id==0){
                        Encripta(dados.value);
                        document.getElementById(next).focus();
                    }else if(envia.id==1){
                        Descripta(dados.value);
                        document.getElementById(next).focus();
                    }else{
                        limpar();
                    }
                        return false;
                    }
                    }else{
                        return true;
                }
            }

            function limpar(){
                for (var i=0; i<3;i++){
                    document.getElementById(i).value="";
                }
                    document.getElementById(0).focus();
            }
            </script>

        <footer>
            &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
            <a href="https://www.linkedin.com/in/rafaele-godoy/" target="_blank"><img src="img/linkedin.jpg" alt="Logo do linkedin" height="45px" width="45px" ></a >&emsp;&emsp;
            <a href="https://twitter.com/godoy_rafaele" target="_blank"><img src="img/twitter.png" alt="Logo do twitter" height="45px" width="45px"></a> &emsp;&emsp;
            <a href="https://github.com/RafaGodoy13" target="_blank"><img src="img/github.png" alt="Logo do github" height="45px" width="45px" ></a> &emsp;&emsp;
            <a href="https://www.instagram.com/rafaelegodoy13/" target="_blank"><img src="img/instagram.webp" alt="Logo do instagram" height="45px" width="45px"></a> &emsp;&emsp;
            <a href="https://www.facebook.com/profile.php?id=100080471065954" target="_blank"><img src="img/facebook.png" alt="Logo do facebook" height="45px" width="45px" ></a>
            <p class="copyright">&copy; Copyright Rafaele Godoy - 2022  
        </footer>
    </body>
</html>
